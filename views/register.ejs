<!DOCTYPE HTML>
<html lang = "en" >
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <title>Sign up</title>
  <link rel="stylesheet" href="/public/css/register.css">
</head>
<body ng-app = "errorName" ng-controller = "controlName">


  <div class = "logo">

 <span class = "picture"><img src = "/main.jpg" width = "398" height = "137" > </span>

 <div class = "text">

    <div><a href = "/contact" >Contact</a></div>

    <div><ul class = "menu"><li class="service"><a href = "/" >Services</a>

      <ul class="submenu">
             <li><a href=#>Sudmenu 1</a></li>
             <li><a href=#>Sudmenu 1</a></li>
             <li><a href=#>Sudmenu 1</a></li>
       </ul>

   </li></ul></div>

    <div><a href = "/about" >About</a></div> <div> <a href = "/" >Home</a></div>

 </div>

 </div>

 <hr>

  <div class = "block">
  <h1>Put your information to sign up</h1>
  <div class = "form">
  <form name = "myForm" method = "post" action = "/getData" onsubmit="return checkForm()">

    <div class = "nick"> <label>NickName : </label>
      <input autofocus type = "text" name = "name" placeholder = "Enter Your NickName" autocomplete="off" id = "name" onclick = "offBorderName()" ng-model = "name">
      <span class = "enterError" id = 'errorName'></span>
      <br>
      <span ng-repeat = "item in dataset | filter : name : true " style = "color : yellow; margin-left: 100px">Name <span id = "item">{{item.name}}</span> is taken</span>
    </div>
          <br>
    <div class="pass"> <label>Password : </label>
      <input type = "password" name = "password" placeholder = "Password" autocomplete = "off" id = "password" onclick = "offBorderPassword()">
      <span class = "enterError" id = 'errorPassword'></span>
    </div>
          <br>
    <div class="email"> <label>Email : </label>
        <input type="text" id = "email" name = "email" placeholder="Enter E-mail" onclick = "offBorderEmail()">
        <span class = "enterError" id = 'errorEmail'></span>
    </div>
    <span class = "code">Activation code will be sent to this Email.<br>Please enter email type @gmail.com</span>
    <br>

    <input name = "clock" id = "clock" hidden = "true">
    <input type = "submit" id = "submit" value="Submit data">


  </form>


  <script>
   function checkForm()
   {
     if(document.myForm.name.value == '')
     {
       document.getElementById('errorName').style.display = 'block';
       document.getElementById('errorName').innerHTML = 'Enter data';
       document.getElementById('name').style.border = '1px solid red';
       return false;
     }
     if(document.myForm.password.value == '')
     {
       document.getElementById('errorPassword').style.display = 'block';
       document.getElementById('errorPassword').innerHTML = 'Enter data';
       document.getElementById('password').style.border = '1px solid red';
       return false;
     }

     var y = document.getElementById('email').value;
     at = y.indexOf("@");
     dot = y.indexOf(".");

     if( at < 1 || dot < 1 )
     {
       document.getElementById('errorEmail').style.display = 'block';
       document.getElementById('errorEmail').innerHTML = 'Enter data';
       document.getElementById('email').style.border = '1px solid red';
       return false;
     }

     if(document.getElementById('name').value == document.getElementById('item').innerHTML)
     {
       document.getElementById('name').style.border = '1px solid red';
       return false;
     }

     var y = document.getElementById('email').value;
     at = y.indexOf("@");
     dot = y.indexOf(".");

     if( at < 1 || dot < 1 )
     {
       document.getElementById('email').style.border = '1px solid red';
       return false;
     }

     return true;
   }

  </script>


  <script>


  var d = new Date();

  var day = new Array("Sunday", "Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");

  var month=new Array("January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December");

   //document.write( day[d.getDay()] + " " + d.getDate() + " " + month[d.getMonth()] + " " + d.getFullYear() + "Ð³.");
   document.getElementById('clock').value = day[d.getDay()] + " " + d.getDate() + " " + month[d.getMonth()] + " " + d.getFullYear();
   //var date = new Date();
  //document.write( date.getDay() + " "  + date.getHours());

  </script>


   <script>
   function offBorderName()
   {
      document.getElementById("errorName").style.display = "none";
      document.getElementById('name').style.border = '1px solid grey';
   }
   function offBorderPassword()
   {
      document.getElementById("errorPassword").style.display = "none";
      document.getElementById('password').style.border = '1px solid grey';
   }
   function offBorderEmail()
   {
      document.getElementById("errorEmail").style.display = "none";
      document.getElementById('email').style.border = '1px solid grey';
   }
   </script>



   <script>

     var myApp = angular.module('errorName',[ ]);

     myApp.controller('controlName', ['$scope', '$http', function ($scope,$http){
       $scope.name = '';

   $scope.getUser = function (){
       $http.get('getDb')
   .then(function(response) {
         $scope.dataset = response.data;
     });

   }

    $scope.getUser();

     }]);

   </script>



  </div>
</div>

</body>
</html>
